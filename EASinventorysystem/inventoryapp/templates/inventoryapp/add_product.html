    {% extends 'inventoryapp/base.html' %}
    {% load static %}

    {% block content %}
    <h1>Create Item<h1>
    <br><br>
    <form method="POST" action="{% url 'add_product' %}"  enctype="multipart/form-data">
        {% csrf_token %}
        <div>
            <label for="id_EAS_Product_ID">EAS Product ID:</label>
            <input type="text" name="eas_id" maxlength="32" required id="id_EAS_Product_ID">
        </div>
        
        <div>
            <label for="id_Name">Name:</label>
            <input type="text" name="product_name"  maxlength="64" required id="id_Name">
        </div>

        <div>
            <label for="id_Name">SKU:</label>
            <input type="text" name="product_sku"  maxlength="64" required id="id_Name">
        </div>
        
        <div>
            <label for="id_Picture">Picture:</label>
            <div id="image-preview"></div>
            <input type="file" name="product_picture" accept="image/*" id="id_Picture">
            <button type="button" id="remove-image" style="display: none;">Remove Image</button>
        </div>
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const pictureInput = document.getElementById("id_Picture");
                const imagePreview = document.getElementById("image-preview");
                const removeImageButton = document.getElementById("remove-image");

                // Function to update the image preview
                function updatePreview() {
                    const file = pictureInput.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(event) {
                            const image = new Image();
                            image.src = event.target.result;
                            image.width = 50;
                            imagePreview.innerHTML = ''; // Clear any existing preview
                            imagePreview.appendChild(image);
                            removeImageButton.style.display = "inline-block"; // Show the "Remove Image" button
                        };
                        reader.readAsDataURL(file);
                    } else {
                        imagePreview.innerHTML = ''; // Clear the preview if no file is selected
                        removeImageButton.style.display = "none"; // Hide the "Remove Image" button
                    }
                }

                // Event listener for input change
                pictureInput.addEventListener("change", updatePreview);

                // Event listener for remove image button
                removeImageButton.addEventListener("click", function() {
                    pictureInput.value = null; // Clear the input field
                    imagePreview.innerHTML = ''; // Clear the preview
                    removeImageButton.style.display = "none"; // Hide the "Remove Image" button
                });
            });
        </script>
        
        <div>
            <label for="id_Price">Price:</label>
            <input type="number" name="product_price" step="0.01" required id="id_Price">
        </div>
        
        <div>
            <label for="id_Actual_Inventory_Count">Actual Inventory Count:</label>
            <input type="number" name="product_initial_count" required id="id_Actual_Inventory_Count">
        </div>

        <div>
            <label for="id_Actual_Inventory_Count">Stock Level Threshold:</label>
            <input type="number" name="product_stock_level_threshold" required id="id_Stock_Level_Threshold">
        </div>
        
        <div>
            <label for="id_Category">Category:</label>
            <select name="product_category" id="id_Category" >
                <option value="" disabled selected>Select category</option>
                {% for cat in categories %}
                    <option value="{{ cat.Category_ID }}" >{{ cat.Category_Name }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div>
            <label for="id_Consignee">Consignee:</label>
            <select name="product_consignee" id="id_Consignee">
                <option value="" disabled selected>Select consignee</option>
                {% for con in consignees %}
                    <option value="{{ con.Consignee_ID}}">{{ con.Customer_Name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="row">
            <button type="submit" class="btn-success" name="Add">Create</button>
            <a href="{% url 'current_inventory' %}" class="btn-danger">Cancel</a>
        </div>  
    </form>

    {% endblock %}